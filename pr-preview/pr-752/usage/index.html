
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../changelog/">
      
      
        <link rel="next" href="../reference/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.5">
    
    
      
        <title>Usage - Tanjun docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7a7fce14.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.5 1.75v11.5c0 .138.112.25.25.25h3.17a.75.75 0 0 1 0 1.5H2.75A1.75 1.75 0 0 1 1 13.25V1.75C1 .784 1.784 0 2.75 0h8.5C12.216 0 13 .784 13 1.75v7.736a.75.75 0 0 1-1.5 0V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25Zm13.274 9.537v-.001l-4.557 4.45a.75.75 0 0 1-1.055-.008l-1.943-1.95a.75.75 0 0 1 1.062-1.058l1.419 1.425 4.026-3.932a.75.75 0 1 1 1.048 1.074ZM4.75 4h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM4 7.75A.75.75 0 0 1 4.75 7h2a.75.75 0 0 1 0 1.5h-2A.75.75 0 0 1 4 7.75Z"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M3.499.75a.75.75 0 0 1 1.5 0v.996C5.9 2.903 6.793 3.65 7.662 4.376l.24.202c-.036-.694.055-1.422.426-2.163C9.1.873 10.794-.045 12.622.26 14.408.558 16 1.94 16 4.25c0 1.278-.954 2.575-2.44 2.734l.146.508.065.22c.203.701.412 1.455.476 2.226.142 1.707-.4 3.03-1.487 3.898C11.714 14.671 10.27 15 8.75 15h-6a.75.75 0 0 1 0-1.5h1.376a4.484 4.484 0 0 1-.563-1.191 3.835 3.835 0 0 1-.05-2.063 4.647 4.647 0 0 1-2.025-.293.75.75 0 0 1 .525-1.406c1.357.507 2.376-.006 2.698-.318l.009-.01a.747.747 0 0 1 1.06 0 .748.748 0 0 1-.012 1.074c-.912.92-.992 1.835-.768 2.586.221.74.745 1.337 1.196 1.621H8.75c1.343 0 2.398-.296 3.074-.836.635-.507 1.036-1.31.928-2.602-.05-.603-.216-1.224-.422-1.93l-.064-.221c-.12-.407-.246-.84-.353-1.29a2.425 2.425 0 0 1-.507-.441 3.075 3.075 0 0 1-.633-1.248.75.75 0 0 1 1.455-.364c.046.185.144.436.31.627.146.168.353.305.712.305.738 0 1.25-.615 1.25-1.25 0-1.47-.95-2.315-2.123-2.51-1.172-.196-2.227.387-2.706 1.345-.46.92-.27 1.774.019 3.062l.042.19a.884.884 0 0 1 .01.05c.348.443.666.949.94 1.553a.75.75 0 1 1-1.365.62c-.553-1.217-1.32-1.94-2.3-2.768L6.7 5.527c-.814-.68-1.75-1.462-2.692-2.619a3.737 3.737 0 0 0-1.023.88c-.406.495-.663 1.036-.722 1.508.116.122.306.21.591.239.388.038.797-.06 1.032-.19a.75.75 0 0 1 .728 1.31c-.515.287-1.23.439-1.906.373-.682-.067-1.473-.38-1.879-1.193L.75 5.677V5.5c0-.984.48-1.94 1.077-2.664.46-.559 1.05-1.055 1.673-1.353V.75Z"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.92 6.085h.001a.749.749 0 1 1-1.342-.67c.169-.339.436-.701.849-.977C6.845 4.16 7.369 4 8 4a2.756 2.756 0 0 1 1.637.525c.503.377.863.965.863 1.725 0 .448-.115.83-.329 1.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6.24 6.24 0 0 0-.26.16.952.952 0 0 0-.276.245.75.75 0 0 1-1.248-.832c.184-.264.42-.489.692-.661.103-.067.207-.132.313-.195l.007-.004c.1-.061.182-.11.258-.161a.969.969 0 0 0 .277-.245C8.96 6.514 9 6.427 9 6.25a.612.612 0 0 0-.262-.525A1.27 1.27 0 0 0 8 5.5c-.369 0-.595.09-.74.187a1.01 1.01 0 0 0-.34.398ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.344 2.343h-.001a8 8 0 0 1 11.314 11.314A8.002 8.002 0 0 1 .234 10.089a8 8 0 0 1 2.11-7.746Zm1.06 10.253a6.5 6.5 0 1 0 9.108-9.275 6.5 6.5 0 0 0-9.108 9.275ZM6.03 4.97 8 6.94l1.97-1.97a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l1.97 1.97a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-1.97 1.97a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L6.94 8 4.97 6.03a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018Z"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M9.504.43a1.516 1.516 0 0 1 2.437 1.713L10.415 5.5h2.123c1.57 0 2.346 1.909 1.22 3.004l-7.34 7.142a1.249 1.249 0 0 1-.871.354h-.302a1.25 1.25 0 0 1-1.157-1.723L5.633 10.5H3.462c-1.57 0-2.346-1.909-1.22-3.004L9.503.429Zm1.047 1.074L3.286 8.571A.25.25 0 0 0 3.462 9H6.75a.75.75 0 0 1 .694 1.034l-1.713 4.188 6.982-6.793A.25.25 0 0 0 12.538 7H9.25a.75.75 0 0 1-.683-1.06l2.008-4.418.003-.006a.036.036 0 0 0-.004-.009l-.006-.006-.008-.001c-.003 0-.006.002-.009.004Z"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4.72.22a.75.75 0 0 1 1.06 0l1 .999a3.488 3.488 0 0 1 2.441 0l.999-1a.748.748 0 0 1 1.265.332.75.75 0 0 1-.205.729l-.775.776c.616.63.995 1.493.995 2.444v.327c0 .1-.009.197-.025.292.408.14.764.392 1.029.722l1.968-.787a.75.75 0 0 1 .556 1.392L13 7.258V9h2.25a.75.75 0 0 1 0 1.5H13v.5c0 .409-.049.806-.141 1.186l2.17.868a.75.75 0 0 1-.557 1.392l-2.184-.873A4.997 4.997 0 0 1 8 16a4.997 4.997 0 0 1-4.288-2.427l-2.183.873a.75.75 0 0 1-.558-1.392l2.17-.868A5.036 5.036 0 0 1 3 11v-.5H.75a.75.75 0 0 1 0-1.5H3V7.258L.971 6.446a.75.75 0 0 1 .558-1.392l1.967.787c.265-.33.62-.583 1.03-.722a1.677 1.677 0 0 1-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72 1.28a.75.75 0 0 1 0-1.06Zm.53 6.28a.75.75 0 0 0-.75.75V11a3.5 3.5 0 1 0 7 0V7.25a.75.75 0 0 0-.75-.75ZM6.173 5h3.654A.172.172 0 0 0 10 4.827V4.5a2 2 0 1 0-4 0v.327c0 .096.077.173.173.173Z"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M5 5.782V2.5h-.25a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458Zm-2.4 6.565a.75.75 0 0 0 .633 1.153h9.534a.75.75 0 0 0 .633-1.153L12.225 10.5h-8.45ZM9.5 2.5h-3V6c0 .143-.04.283-.117.403L4.73 9h6.54L9.617 6.403A.746.746 0 0 1 9.5 6Z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1.75 2.5h10.5a.75.75 0 0 1 0 1.5H1.75a.75.75 0 0 1 0-1.5Zm4 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5Zm0 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5ZM2.5 7.75v6a.75.75 0 0 1-1.5 0v-6a.75.75 0 0 1 1.5 0Z"/></svg>');}</style>


    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="cyan" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#usage" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Tanjun docs" class="md-header__button md-logo" aria-label="Tanjun docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Tanjun docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Usage
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="cyan" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
            </label>
          
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="cyan" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Tanjun docs" class="md-nav__button md-logo" aria-label="Tanjun docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Tanjun docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Usage
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#starting-with-hikari" class="md-nav__link">
    Starting with Hikari
  </a>
  
    <nav class="md-nav" aria-label="Starting with Hikari">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#client-lifetime-management" class="md-nav__link">
    Client lifetime management
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#managing-bot-functionality" class="md-nav__link">
    Managing bot functionality
  </a>
  
    <nav class="md-nav" aria-label="Managing bot functionality">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#loading-modules" class="md-nav__link">
    Loading modules
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#declaring-commands" class="md-nav__link">
    Declaring commands
  </a>
  
    <nav class="md-nav" aria-label="Declaring commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#slash-commands" class="md-nav__link">
    Slash commands
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-commands" class="md-nav__link">
    Message commands
  </a>
  
    <nav class="md-nav" aria-label="Message commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#argument-parsing" class="md-nav__link">
    Argument parsing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-menus" class="md-nav__link">
    Context menus
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annotation-based-command-declaration" class="md-nav__link">
    Annotation based command declaration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wrapped-commands" class="md-nav__link">
    Wrapped commands
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#responding-to-commands" class="md-nav__link">
    Responding to commands
  </a>
  
    <nav class="md-nav" aria-label="Responding to commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ephemeral-responses" class="md-nav__link">
    Ephemeral responses
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deferrals" class="md-nav__link">
    Deferrals
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#slash-command-autocomplete" class="md-nav__link">
    Slash command autocomplete
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependency-injection" class="md-nav__link">
    Dependency injection
  </a>
  
    <nav class="md-nav" aria-label="Dependency injection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#standard-and-special-cased-injected-types" class="md-nav__link">
    Standard and special cased injected types.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-command-flow-management" class="md-nav__link">
    Advanced command flow management
  </a>
  
    <nav class="md-nav" aria-label="Advanced command flow management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#checks" class="md-nav__link">
    Checks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#execution-hooks" class="md-nav__link">
    Execution hooks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#concurrency-limiter" class="md-nav__link">
    Concurrency limiter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cooldowns" class="md-nav__link">
    Cooldowns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#localisation" class="md-nav__link">
    Localisation
  </a>
  
    <nav class="md-nav" aria-label="Localisation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#localising-command-declarations" class="md-nav__link">
    Localising command declarations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-localiser" class="md-nav__link">
    Client localiser
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#localising-command-responses" class="md-nav__link">
    Localising command responses
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/" class="md-nav__link">
        tanjun
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/abc/" class="md-nav__link">
        tanjun.abc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/annotations/" class="md-nav__link">
        tanjun.annotations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/checks/" class="md-nav__link">
        tanjun.checks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/clients/" class="md-nav__link">
        tanjun.clients
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/commands/" class="md-nav__link">
        tanjun.commands
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/components/" class="md-nav__link">
        tanjun.components
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/context/" class="md-nav__link">
        tanjun.context
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/conversion/" class="md-nav__link">
        tanjun.conversion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/dependencies/" class="md-nav__link">
        tanjun.dependencies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/errors/" class="md-nav__link">
        tanjun.errors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/hooks/" class="md-nav__link">
        tanjun.hooks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/parsing/" class="md-nav__link">
        tanjun.parsing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/permissions/" class="md-nav__link">
        tanjun.permissions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/schedules/" class="md-nav__link">
        tanjun.schedules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utilities/" class="md-nav__link">
        tanjun.utilities
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#starting-with-hikari" class="md-nav__link">
    Starting with Hikari
  </a>
  
    <nav class="md-nav" aria-label="Starting with Hikari">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#client-lifetime-management" class="md-nav__link">
    Client lifetime management
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#managing-bot-functionality" class="md-nav__link">
    Managing bot functionality
  </a>
  
    <nav class="md-nav" aria-label="Managing bot functionality">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#loading-modules" class="md-nav__link">
    Loading modules
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#declaring-commands" class="md-nav__link">
    Declaring commands
  </a>
  
    <nav class="md-nav" aria-label="Declaring commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#slash-commands" class="md-nav__link">
    Slash commands
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-commands" class="md-nav__link">
    Message commands
  </a>
  
    <nav class="md-nav" aria-label="Message commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#argument-parsing" class="md-nav__link">
    Argument parsing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-menus" class="md-nav__link">
    Context menus
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annotation-based-command-declaration" class="md-nav__link">
    Annotation based command declaration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wrapped-commands" class="md-nav__link">
    Wrapped commands
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#responding-to-commands" class="md-nav__link">
    Responding to commands
  </a>
  
    <nav class="md-nav" aria-label="Responding to commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ephemeral-responses" class="md-nav__link">
    Ephemeral responses
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deferrals" class="md-nav__link">
    Deferrals
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#slash-command-autocomplete" class="md-nav__link">
    Slash command autocomplete
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependency-injection" class="md-nav__link">
    Dependency injection
  </a>
  
    <nav class="md-nav" aria-label="Dependency injection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#standard-and-special-cased-injected-types" class="md-nav__link">
    Standard and special cased injected types.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-command-flow-management" class="md-nav__link">
    Advanced command flow management
  </a>
  
    <nav class="md-nav" aria-label="Advanced command flow management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#checks" class="md-nav__link">
    Checks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#execution-hooks" class="md-nav__link">
    Execution hooks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#concurrency-limiter" class="md-nav__link">
    Concurrency limiter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cooldowns" class="md-nav__link">
    Cooldowns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#localisation" class="md-nav__link">
    Localisation
  </a>
  
    <nav class="md-nav" aria-label="Localisation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#localising-command-declarations" class="md-nav__link">
    Localising command declarations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-localiser" class="md-nav__link">
    Client localiser
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#localising-command-responses" class="md-nav__link">
    Localising command responses
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">#</a></h1>
<p>This guide is not a conclusive list of the features in Tanjun.</p>
<p>You'll want to have some basic understanding of Hikari before you start
using Tanjun. A basic Hikari guide can be found <a href="https://hg.cursed.solutions/">here</a>.</p>
<h2 id="starting-with-hikari">Starting with Hikari<a class="headerlink" href="#starting-with-hikari" title="Permanent link">#</a></h2>
<p>Tanjun supports both REST server-based application command execution and
gateway-based message and application command execution, and to run Tanjun
you'll want to link it to a Hikari bot.</p>
<div class="highlight"><pre><span></span><code><span class="n">bot</span> <span class="o">=</span> <span class="n">hikari</span><span class="o">.</span><span class="n">impl</span><span class="o">.</span><span class="n">GatewayBot</span><span class="p">(</span><span class="s2">&quot;TOKEN&quot;</span><span class="p">)</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">Client</span><span class="o">.</span><span class="n">from_gateway_bot</span><span class="p">(</span><span class="n">bot</span><span class="p">,</span> <span class="n">declare_global_commands</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mention_prefix</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="o">...</span>

<span class="n">bot</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
<p>Here a Tanjun client is linked to a gateway bot instance to enable both
message and application command execution.</p>
<p>There's no need to directly start or stop the Tanjun client as it'll be managed
by lifetime events (unless <code>event_managed=False</code> is passed).</p>
<p><code>declare_global_commands=True</code> instructs the client to declare the bot's slash
commands and context menus on startup and <code>mention_prefix=True</code> allows the
bot's message commands to be triggered by starting a command call with <code>@bot</code>.</p>
<div class="highlight"><pre><span></span><code><span class="n">bot</span> <span class="o">=</span> <span class="n">hikari</span><span class="o">.</span><span class="n">impl</span><span class="o">.</span><span class="n">RESTBot</span><span class="p">(</span><span class="s2">&quot;TOKEN&quot;</span><span class="p">,</span> <span class="n">hikari</span><span class="o">.</span><span class="n">TokenType</span><span class="o">.</span><span class="n">BOT</span><span class="p">)</span>
<span class="n">tanjun</span><span class="o">.</span><span class="n">Client</span><span class="o">.</span><span class="n">from_rest_bot</span><span class="p">(</span><span class="n">bot</span><span class="p">,</span> <span class="n">bot_managed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">declare_global_commands</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">bot</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
<p>And here a Tanjun client is linked to a REST server bot instance to enable
application command execution.</p>
<p>Unlike when linked to a Gateway bot, <code>bot_managed=True</code> must be explicitly
passed to <a class="autorefs autorefs-internal" href="../reference/clients/#tanjun.clients.Client.from_rest_bot">Client.from_rest_bot</a> to
have the client automatically start when the Rest bot starts.</p>
<h3 id="client-lifetime-management">Client lifetime management<a class="headerlink" href="#client-lifetime-management" title="Permanent link">#</a></h3>
<p>While Hikari's bots provide systems for stating and stopping sub-components,
these aren't cross-compatible nor Tanjun friendly and Tanjun's client callbacks
provide a cross-compatible alternative for these (which also supports dependency
injection).</p>
<div class="highlight"><pre><span></span><code><span class="n">client</span> <span class="o">=</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">Client</span><span class="o">.</span><span class="n">from_gateway_bot</span><span class="p">(</span><span class="n">bot</span><span class="p">)</span>

<span class="nd">@client</span><span class="o">.</span><span class="n">with_client_callback</span><span class="p">(</span><span class="n">tanjun</span><span class="o">.</span><span class="n">ClientCallbackNames</span><span class="o">.</span><span class="n">STARTING</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">on_starting</span><span class="p">(</span><span class="n">client</span><span class="p">:</span> <span class="n">alluka</span><span class="o">.</span><span class="n">Injected</span><span class="p">[</span><span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Client</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">client</span><span class="o">.</span><span class="n">set_type_dependency</span><span class="p">(</span><span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">,</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">())</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">on_closed</span><span class="p">(</span><span class="n">session</span><span class="p">:</span> <span class="n">alluka</span><span class="o">.</span><span class="n">Injected</span><span class="p">[</span><span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="n">client</span><span class="o">.</span><span class="n">add_client_callback</span><span class="p">(</span><span class="n">tanjun</span><span class="o">.</span><span class="n">ClientCallbackNames</span><span class="o">.</span><span class="n">CLOSED</span><span class="p">,</span> <span class="n">on_closed</span><span class="p">)</span>
</code></pre></div>
<h2 id="managing-bot-functionality">Managing bot functionality<a class="headerlink" href="#managing-bot-functionality" title="Permanent link">#</a></h2>
<p><a class="autorefs autorefs-internal" href="../reference/components/#tanjun.components.Component">tanjun.components.Component</a> exists as a way to manage and group bot
functionality, storing functionality such as event listeners, commands,
scheduled callbacks, and client callbacks.</p>
<div class="highlight"><pre><span></span><code><span class="n">component</span> <span class="o">=</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">Component</span><span class="p">()</span>

<span class="nd">@component</span><span class="o">.</span><span class="n">with_command</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_slash_command</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">slash_command</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">SlashContext</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>

<span class="nd">@component</span><span class="o">.</span><span class="n">with_listener</span><span class="p">()</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">event_listener</span><span class="p">(</span><span class="n">event</span><span class="p">:</span> <span class="n">hikari</span><span class="o">.</span><span class="n">Event</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>
</code></pre></div>
<p>The <code>with_</code> methods on <a class="autorefs autorefs-internal" href="../reference/components/#tanjun.components.Component">Component</a> allow
loading functionality like commands, event listeners, and schedules into it
through a decorator call; the relevant <code>add_</code> functions allow adding
functionality through chained calls.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_message_command</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">command</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">MessageContext</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>

<span class="n">component</span> <span class="o">=</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">Component</span><span class="p">()</span><span class="o">.</span><span class="n">load_from_scope</span><span class="p">()</span>
</code></pre></div>
<p>Alternatively, functionality which is represented by a dedicated object can be
implicitly loaded from a module's global scope using
<a class="autorefs autorefs-internal" href="../reference/components/#tanjun.components.Component.load_from_scope">Component.load_from_scope</a>
rather than directly calling <code>with_</code> and <code>add_</code> methods.</p>
<!-- ### Component lifetimes

[with_on_open][tanjun.components.Component.with_on_open] [with_on_close][tanjun.components.Component.with_on_open] -->

<h3 id="loading-modules">Loading modules<a class="headerlink" href="#loading-modules" title="Permanent link">#</a></h3>
<p>Components are used to represent the functionality in a Python module.
While <a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.Client.add_component">add_component</a> can be used to directly
add a component to a client, you can also declare "loaders" and "unloaders" for
a module to more ergonomically load this functionality into a client.</p>
<div class="highlight"><pre><span></span><code><span class="n">component</span> <span class="o">=</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">Component</span><span class="p">()</span><span class="o">.</span><span class="n">load_from_scope</span><span class="p">()</span>

<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_loader</span>
<span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="n">client</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">Client</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">client</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span><span class="n">component</span><span class="p">)</span>

<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_unloader</span>
<span class="k">def</span> <span class="nf">unload</span><span class="p">(</span><span class="n">client</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">Client</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">client</span><span class="o">.</span><span class="n">remove_component</span><span class="p">(</span><span class="n">component</span><span class="p">)</span>
</code></pre></div>
<p>You can either declare one or more custom loaders and unloaders as shown above</p>
<div class="highlight"><pre><span></span><code><span class="n">component</span> <span class="o">=</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">Component</span><span class="p">()</span><span class="o">.</span><span class="n">load_from_scope</span><span class="p">()</span>

<span class="n">loader</span> <span class="o">=</span> <span class="n">component</span><span class="o">.</span><span class="n">make_loader</span><span class="p">()</span>
</code></pre></div>
<p>or use <a class="autorefs autorefs-internal" href="../reference/components/#tanjun.components.Component.make_loader">make_loader</a> to generate a
loader and unloader for the component.</p>
<div class="highlight"><pre><span></span><code><span class="p">(</span>
    <span class="n">tanjun</span><span class="o">.</span><span class="n">Client</span><span class="o">.</span><span class="n">from_gateway_bot</span><span class="p">(</span><span class="n">bot</span><span class="p">)</span>
    <span class="o">.</span><span class="n">load_directory</span><span class="p">(</span><span class="s2">&quot;./bot/components&quot;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s2">&quot;bot.components&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">load_modules</span><span class="p">(</span><span class="s2">&quot;bot.owner&quot;</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div>
<p>Modules with loaders can then be loaded into a client by calling
<a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.Client.load_directory">load_directory</a> to load from all the
modules in a directory or <a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.Client.load_modules">load_modules</a> to
load specific modules.</p>
<!-- ### Hot reloading -->

<h2 id="declaring-commands">Declaring commands<a class="headerlink" href="#declaring-commands" title="Permanent link">#</a></h2>
<p>Commands need to be contained within a component to be loaded into a client
and may be added to a component either directly using
<a class="autorefs autorefs-internal" href="../reference/components/#tanjun.components.Component.add_command">Component.add_command</a>/
<a class="autorefs autorefs-internal" href="../reference/components/#tanjun.components.Component.with_command">Component.with_command</a>
(where add is chainable and with is a decorator callback) or implicitly
using <a class="autorefs autorefs-internal" href="../reference/components/#tanjun.components.Component.load_from_scope">Component.load_from_scope</a>.</p>
<p>All command callbacks must be asynchronous and can use dependency injection.</p>
<h3 id="slash-commands">Slash commands<a class="headerlink" href="#slash-commands" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@tanjun</span><span class="o">.</span><span class="n">with_str_slash_option</span><span class="p">(</span><span class="s2">&quot;option&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_slash_command</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">slash_command</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">SlashContext</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>
</code></pre></div>
<p>Slash commands represent the commands you see when you start typing with "/" in
Discord's message box and have names (which follow the restraints shown in
<a href="https://discord.com/developers/docs/dispatch/field-values#predefined-field-values-accepted-locales">https://discord.com/developers/docs/dispatch/field-values#predefined-field-values-accepted-locales</a>)
and descriptions (which can be up to 100 characters long).</p>
<p>There are several different kinds of slash command arguments which all require
an argument name and description (both of which have the same constraints as
the relevant slash command fields) along with type-specific configuration.
These can be configured using the following decorator functions and their
<code>add_{type}_option</code> equivalent chainable methods on
<a class="autorefs autorefs-internal" href="../reference/commands/#tanjun.commands.slash.SlashCommand">SlashCommand</a>:</p>
<ul>
<li><a class="autorefs autorefs-internal" href="../reference/commands/#tanjun.commands.slash.with_attachment_slash_option">with_attachment_slash_option</a></li>
<li><a class="autorefs autorefs-internal" href="../reference/commands/#tanjun.commands.slash.with_bool_slash_option">with_bool_slash_option</a></li>
<li><a class="autorefs autorefs-internal" href="../reference/commands/#tanjun.commands.slash.with_channel_slash_option">with_channel_slash_option</a></li>
<li><a class="autorefs autorefs-internal" href="../reference/commands/#tanjun.commands.slash.with_float_slash_option">with_float_slash_option</a></li>
<li><a class="autorefs autorefs-internal" href="../reference/commands/#tanjun.commands.slash.with_int_slash_option">with_int_slash_option</a></li>
<li><a class="autorefs autorefs-internal" href="../reference/commands/#tanjun.commands.slash.with_member_slash_option">with_member_slash_option</a></li>
<li><a class="autorefs autorefs-internal" href="../reference/commands/#tanjun.commands.slash.with_mentionable_slash_option">with_mentionable_slash_option</a></li>
<li><a class="autorefs autorefs-internal" href="../reference/commands/#tanjun.commands.slash.with_role_slash_option">with_role_slash_option</a></li>
<li><a class="autorefs autorefs-internal" href="../reference/commands/#tanjun.commands.slash.with_str_slash_option">with_str_slash_option</a></li>
<li><a class="autorefs autorefs-internal" href="../reference/commands/#tanjun.commands.slash.with_user_slash_option">with_user_slash_option</a></li>
</ul>
<p>Most notably, only string arguments support converters (and the standard
converters found in <a class="autorefs autorefs-internal" href="../reference/conversion/#tanjun.conversion">tanjun.conversion</a>) similarly to message command
arguments.</p>
<div class="highlight"><pre><span></span><code><span class="n">ding_group</span> <span class="o">=</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">slash_command_group</span><span class="p">(</span><span class="s2">&quot;ding&quot;</span><span class="p">,</span> <span class="s2">&quot;ding group&quot;</span><span class="p">)</span>

<span class="nd">@ding_group</span><span class="o">.</span><span class="n">as_sub_command</span><span class="p">(</span><span class="s2">&quot;dong&quot;</span><span class="p">,</span> <span class="s2">&quot;dong command&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">dong_command</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">SlashContext</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>

<span class="n">ding_ding_group</span> <span class="o">=</span> <span class="n">ding_group</span><span class="o">.</span><span class="n">make_sub_group</span><span class="p">(</span><span class="s2">&quot;ding&quot;</span><span class="p">,</span> <span class="s2">&quot;ding ding group&quot;</span><span class="p">)</span>

<span class="nd">@ding_ding_group</span><span class="o">.</span><span class="n">as_sub_command</span><span class="p">(</span><span class="s2">&quot;ding&quot;</span><span class="p">,</span> <span class="s2">&quot;ding ding ding command&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">ding_command</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">SlashContext</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>
</code></pre></div>
<p>Slash commands can be stored in groups where the above example will be shown in
the command menu as <code>"/ding dong"</code> and <code>"/ding ding ding"</code>. Unlike message command
groups, slash command groups cannot be directly called as commands and can only
be nested once. For more information on how slash command groups are configured
see <a class="autorefs autorefs-internal" href="../reference/commands/#tanjun.commands.slash.slash_command_group">slash_command_group</a>.</p>
<h3 id="message-commands">Message commands<a class="headerlink" href="#message-commands" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">tanjun</span><span class="o">.</span><span class="n">Client</span><span class="o">.</span><span class="n">from_gateway_bot</span><span class="p">(</span><span class="n">bot</span><span class="p">)</span><span class="o">.</span><span class="n">add_prefix</span><span class="p">(</span><span class="s2">&quot;!&quot;</span><span class="p">)</span>

<span class="o">...</span>

<span class="nd">@tanjun</span><span class="o">.</span><span class="n">with_option</span><span class="p">(</span><span class="s2">&quot;reason&quot;</span><span class="p">,</span> <span class="s2">&quot;--reason&quot;</span><span class="p">,</span> <span class="s2">&quot;-r&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>  <span class="c1"># This can be triggered as --reason or -r</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">with_multi_option</span><span class="p">(</span><span class="s2">&quot;users&quot;</span><span class="p">,</span> <span class="s2">&quot;--user&quot;</span><span class="p">,</span> <span class="s2">&quot;-u&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>  <span class="c1"># This can be triggered as --user or -u</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">with_greedy_argument</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">with_argument</span><span class="p">(</span><span class="s2">&quot;days&quot;</span><span class="p">,</span> <span class="n">converters</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_message_command</span><span class="p">(</span><span class="s2">&quot;meow command&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">message_command</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">MessageContext</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>
</code></pre></div>
<p>Message commands are triggered based on chat messages where the client's
prefixes and command names are used to match executable message commands
(the above example would match messages starting with <code>"!meow command"</code>).
These will only be executed when linked to a gateway bot with the
<code>MESSAGE_CONTENT</code> intent declared and when at least 1 prefix is set.</p>
<p>To allow users to trigger a command by mentioning the bot before the command
name (e.g. <code>@BotGirl meow command</code>) you can pass <code>mention_prefix=True</code> to
either <a class="autorefs autorefs-internal" href="../reference/clients/#tanjun.clients.Client.from_gateway_bot">Client.from_gateway_bot</a> or
<a class="autorefs autorefs-internal" href="../reference/clients/#tanjun.clients.Client.__init__">Client.__init__</a> while creating the bot.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># prefixes=[&quot;!&quot;]</span>

<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_message_command_group</span><span class="p">(</span><span class="s2">&quot;groupy&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">groupy_group</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">MessageContext</span><span class="p">):</span>
    <span class="o">...</span>

<span class="nd">@groupy_group</span><span class="o">.</span><span class="n">as_sub_command</span><span class="p">(</span><span class="s2">&quot;sus drink&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">sus_drink_command</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">MessageContext</span><span class="p">):</span>
    <span class="o">...</span>

<span class="nd">@groupy_group</span><span class="o">.</span><span class="n">as_sub_group</span><span class="p">(</span><span class="s2">&quot;tour&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">tour_group</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">MessageContext</span><span class="p">):</span>
    <span class="o">...</span>

<span class="nd">@tour_group</span><span class="o">.</span><span class="n">as_sub_command</span><span class="p">(</span><span class="s2">&quot;de france&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">de_france_command</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">MessageContext</span><span class="p">):</span>
    <span class="o">...</span>
</code></pre></div>
<p>Message command groups are a collection of message commands under a shared name
and (unlike slash commands) can also be directly executed as a command. The above
example would have the following commands: <code>"!groupy"</code>, <code>!"groupy tour"</code>,
<code>"!groupy tour de france"</code> and <code>"!groupy sus drink"</code>. For more information
on how message command groups are configured see
<a class="autorefs autorefs-internal" href="../reference/commands/#tanjun.commands.message.as_message_command_group">as_message_command_group</a>.</p>
<h4 id="argument-parsing">Argument parsing<a class="headerlink" href="#argument-parsing" title="Permanent link">#</a></h4>
<p>Message command argument parsing always handles string arguments and to declare
parsed arguments you can use one of the <code>with_option</code> or <code>with_argument</code> methods
in <a class="autorefs autorefs-internal" href="../reference/parsing/#tanjun.parsing">tanjun.parsing</a>; while options are optional arguments that are passed
based on a flag name (e.g. <code>"--key"</code>), arguments are passed positionally.
It's worth noting that since decorators are executed from the bottom upwards
positional arguments will follow the same order.</p>
<p>Arguments and options have multiple parsing approaches: Arguments only parse
one value by default; "multi" (can be applied to both) arguments parse multiple
values separately (passed to the function as a list of values); "greedy"
(argument only) arguments parse the remaining positional values as one big
string (including spacing).</p>
<p>The most helpful configuration for options and arguments is converters: these
are callbacks which will be called to try convert an argument's raw value; the
first callback to pass (not raise a <a class="autorefs autorefs-external" href="https://docs.python.org/3.11/library/exceptions.html#ValueError">ValueError</a>) is used as the value. For
more configuration see <a class="autorefs autorefs-internal" href="../reference/parsing/#tanjun.parsing">tanjun.parsing</a> and for the standard converters see
<a class="autorefs autorefs-internal" href="../reference/conversion/#tanjun.conversion">tanjun.conversion</a>.</p>
<h3 id="context-menus">Context menus<a class="headerlink" href="#context-menus" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@component</span><span class="o">.</span><span class="n">with_command</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_message_menu</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">message_menu_command</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">MenuContext</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">hikari</span><span class="o">.</span><span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>

<span class="nd">@component</span><span class="o">.</span><span class="n">with_command</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_user_menu</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">user_menu_command</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">MenuContext</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">hikari</span><span class="o">.</span><span class="n">User</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>
</code></pre></div>
<p>Context menus represent the application commands shown when you click on a user
or message in Discord and, unlike slash and message commands, do not have
configurable arguments nor groups. For more information on configuring menu
commands see <a class="autorefs autorefs-internal" href="../reference/commands/#tanjun.commands.menu.as_message_menu">tanjun.as_message_menu</a>.</p>
<h3 id="annotation-based-command-declaration">Annotation based command declaration<a class="headerlink" href="#annotation-based-command-declaration" title="Permanent link">#</a></h3>
<p>Previously you've seen how to manually declare command options per command
type, now it's time to go higher.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">tanjun.annotations</span> <span class="kn">import</span> <span class="n">Bool</span><span class="p">,</span> <span class="n">Converted</span><span class="p">,</span> <span class="n">Int</span><span class="p">,</span> <span class="n">Ranged</span><span class="p">,</span> <span class="n">Str</span><span class="p">,</span> <span class="n">User</span>

<span class="nd">@tanjun</span><span class="o">.</span><span class="n">annotations</span><span class="o">.</span><span class="n">with_annotated_args</span><span class="p">(</span><span class="n">follow_wrapped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_slash_command</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_message_command</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">command</span><span class="p">(</span>
    <span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">Str</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">],</span>
    <span class="n">age</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">Int</span><span class="p">,</span> <span class="n">Ranged</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">130</span><span class="p">),</span> <span class="s2">&quot;an int option with a min, max or 13, 130&quot;</span><span class="p">],</span>
    <span class="n">video</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">Video</span><span class="p">,</span> <span class="n">Converted</span><span class="p">(</span><span class="n">get_video</span><span class="p">),</span> <span class="s2">&quot;a string option which is converted with get_video&quot;</span><span class="p">],</span>
    <span class="n">user</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">User</span><span class="p">],</span> <span class="s2">&quot;an optional user option which defaults to None&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">enabled</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">Bool</span><span class="p">,</span> <span class="s2">&quot;an optional bool option which defaults to True&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>
</code></pre></div>
<p><a class="autorefs autorefs-internal" href="../reference/annotations/#tanjun.annotations">tanjun.annotations</a> provides a simple way to declare the arguments for both
message and slash commands. While this feature is cross-compatible, there is
one key difference: a description must be included for options when annotating
for a slash command, which is done by passing a string value to
<a class="autorefs autorefs-external" href="https://docs.python.org/3.11/library/typing.html#typing.Annotated">typing.Annotated</a> (as shown above).</p>
<p>This example doesn't demonstrate every feature of this; more information on
how arguments are configured in a command's signature can be found at
<a class="autorefs autorefs-internal" href="../reference/annotations/#tanjun.annotations">tanjun.annotations</a>.</p>
<h3 id="wrapped-commands">Wrapped commands<a class="headerlink" href="#wrapped-commands" title="Permanent link">#</a></h3>
<p>When creating multiple command types in a decorator call chain, standard
decorators which can be applied to multiple command types often have a
<code>follow_wrapped</code> argument which will apply them to all the compatible
commands in a chain if <a class="autorefs autorefs-external" href="https://docs.python.org/3.11/library/constants.html#True">True</a> is passed for it.</p>
<p>When using <code>follow_wrapped</code> the relevant decorator will be applied to all the
compatible <code>as_{}_command</code> decorator calls below it in the chain.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@tanjun</span><span class="o">.</span><span class="n">annotations</span><span class="o">.</span><span class="n">with_annotated_args</span><span class="p">(</span><span class="n">follow_wrapped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">with_guild_check</span><span class="p">(</span><span class="n">follow_wrapped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_slash_command</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_message_command</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">command</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>
</code></pre></div>
<p>While the previous command examples have typed <code>ctx</code> as a context type that's
specific to the command type, it's worth noting that
<a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.Context">abc.Context</a> is a shared base for every command context type
and may be used as the type for <code>ctx</code> when a callback supports multiple command
types.</p>
<h2 id="responding-to-commands">Responding to commands<a class="headerlink" href="#responding-to-commands" title="Permanent link">#</a></h2>
<div class="highlight"><pre><span></span><code><span class="nd">@tanjun</span><span class="o">.</span><span class="n">annotations</span><span class="o">.</span><span class="n">with_annotated_args</span><span class="p">(</span><span class="n">follow_wrapped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_slash_command</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_message_command</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_user_menu</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">command</span><span class="p">(</span>
    <span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Annotated</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">annotations</span><span class="o">.</span><span class="n">User</span><span class="p">],</span> <span class="s2">&quot;The user to target&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">user</span> <span class="ow">or</span> <span class="n">ctx</span><span class="o">.</span><span class="n">author</span>
    <span class="n">message</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span>
        <span class="s2">&quot;message content&quot;</span><span class="p">,</span>
        <span class="n">attachments</span><span class="o">=</span><span class="p">[</span><span class="n">hikari</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="s2">&quot;./its/a/mystery.jpeg&quot;</span><span class="p">)],</span>
        <span class="n">embeds</span><span class="o">=</span><span class="p">[</span><span class="n">hikari</span><span class="o">.</span><span class="n">Embed</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">author</span><span class="p">))</span><span class="o">.</span><span class="n">set_thumbnail</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">author</span><span class="o">.</span><span class="n">display_avatar_url</span><span class="p">)],</span>
        <span class="n">ensure_result</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
<p><a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.Context.respond">Context.respond</a> is used to respond to a command
call, this has a similar signature to Hikari's message respond method but will
only be guaranteed to return a <a class="autorefs autorefs-external" href="https://docs.hikari-py.dev/en/latest/reference/hikari/messages/#hikari.messages.Message">hikari.Message</a> object
when <code>ensure_result=True</code> is passed.</p>
<h3 id="ephemeral-responses">Ephemeral responses<a class="headerlink" href="#ephemeral-responses" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># All this command&#39;s responses will be ephemeral.</span>
<span class="nd">@component</span><span class="o">.</span><span class="n">with_command</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_slash_command</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">default_to_ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">command_1</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">SlashContext</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s2">&quot;hello friend&quot;</span><span class="p">)</span>

<span class="nd">@component</span><span class="o">.</span><span class="n">with_command</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_user_menu</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">command_2</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">MenuContext</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">hikari</span><span class="o">.</span><span class="n">User</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">create_initial_response</span><span class="p">(</span><span class="s2">&quot;Starting the thing&quot;</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># private response</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s2">&quot;meow&quot;</span><span class="p">)</span>  <span class="c1"># public response</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">create_followup</span><span class="p">(</span><span class="s2">&quot;finished the thing&quot;</span><span class="p">,</span> <span class="n">ephemeral</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># private response</span>
</code></pre></div>
<p>Ephemeral responses are a slash command and context menu exclusive feature which
marks a response as private (so that only the command author can see it) and
temporary. A response can be marked as ephemeral by either passing <code>ephemeral=True</code>
to <a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.AppCommandContext.create_initial_response">AppCommandContext.create_initial_response</a>
(when initially responding to the slash command) or
<a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.AppCommandContext.create_followup">AppCommandContext.create_followup</a>
(for followup responses).
Alternatively, an ephemeral default can either be set on a client level
(using <a class="autorefs autorefs-internal" href="../reference/clients/#tanjun.clients.Client.set_ephemeral_default">Client.set_ephemeral_default</a>),
component level
(using <a class="autorefs autorefs-internal" href="../reference/components/#tanjun.components.Component.set_ephemeral_default">Component.set_ephemeral_default</a>),
or for a specific command (by passing <code>default_to_ephemeral=True</code> while
creating a command) to have any relevant application command responses default
to ephemeral (including calls to <a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.Context.respond">tanjun.abc.Context.respond</a>).</p>
<h3 id="deferrals">Deferrals<a class="headerlink" href="#deferrals" title="Permanent link">#</a></h3>
<p>Slash commands and context menus traditionally need to give an initial response
within 3 seconds. If you don't have a response message ready within 3 seconds,
you can defer the first response using
<a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.AppCommandContext.defer">AppCommandContext.defer</a>; the client will
even automatically defer by default if you haven't created an initial response
within a couple of seconds. <a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.Context.respond">Context.respond</a> is
aware of deferrals so you likely won't need to think about automatic deferral,
unless you're using
<a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.AppCommandContext.create_initial_response">AppCommandContext.create_initial_response</a>.</p>
<p>A deferral should be finished by editing in the initial response using either
<a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.Context.edit_initial_response">Context.edit_initial_response</a> or
<a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.Context.respond">Context.respond</a> and if you want a deferred
response to be ephemeral you'll have to either pass <code>ephemeral=True</code> while
deferring or have the ephemeral default set to <a class="autorefs autorefs-external" href="https://docs.python.org/3.11/library/constants.html#True">True</a>.</p>
<p>Automatic deferral can be configured using
<a class="autorefs autorefs-internal" href="../reference/clients/#tanjun.clients.Client.set_auto_defer_after">Client.set_auto_defer_after</a>,
and commands can even be configured to always defer when they start executing
by passing <code>always_defer=True</code> while creating the command.</p>
<h2 id="slash-command-autocomplete">Slash command autocomplete<a class="headerlink" href="#slash-command-autocomplete" title="Permanent link">#</a></h2>
<p>Autocomplete is a slash command exclusive feature that allows a bot to
dynamically return choice suggestions to a user as they type a string option.</p>
<p>Autocomplete callbacks must be asynchronous and support dependency injection.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@component</span><span class="o">.</span><span class="n">with_command</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">with_str_slash_option</span><span class="p">(</span><span class="s2">&quot;opt1&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">with_str_slash_option</span><span class="p">(</span><span class="s2">&quot;opt2&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_slash_command</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">slash_command</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">SlashContext</span><span class="p">,</span> <span class="n">opt1</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">opt2</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>

<span class="nd">@slash_command</span><span class="o">.</span><span class="n">with_str_autocomplete</span><span class="p">(</span><span class="s2">&quot;opt1&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">opt1_autocomplete</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">AutocompleteContext</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">set_choices</span><span class="p">(((</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;other_name&quot;</span><span class="p">,</span> <span class="s2">&quot;other_value&quot;</span><span class="p">)),</span> <span class="n">other_other_name</span><span class="o">=</span><span class="s2">&quot;other_other_value&quot;</span><span class="p">)</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">opt2_autocomplete</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">AutocompleteContext</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">set_choices</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="s2">&quot;other_name&quot;</span><span class="p">:</span> <span class="s2">&quot;other_value&quot;</span><span class="p">})</span>

<span class="n">slash_command</span><span class="o">.</span><span class="n">set_str_autocomplete</span><span class="p">(</span><span class="s2">&quot;opt2&quot;</span><span class="p">,</span> <span class="n">opt2_autocomplete</span><span class="p">)</span>
</code></pre></div>
<p>To set the results for an autocomplete interaction call
<a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.AutocompleteContext.set_choices">AutocompleteContext.set_choices</a>:
this has a similar signature to <a class="autorefs autorefs-external" href="https://docs.python.org/3.11/library/stdtypes.html#dict">dict</a> and takes up to 25 choices (where both
name and value have a limit of up to 100 characters).</p>
<p>Unlike application commands, autocomplete must give a response within 3 seconds
as these do not support deferrals.</p>
<h2 id="dependency-injection">Dependency injection<a class="headerlink" href="#dependency-injection" title="Permanent link">#</a></h2>
<p>Tanjun supports type-based dependency injection as a type-safe approach for
handling global state for most of the callbacks it takes (e.g. command
callbacks, checks, hook callbacks, event listeners, schedule callbacks) through
<a class="autorefs autorefs-external" href="https://alluka.cursed.solutions/reference/#alluka">Alluka</a>.</p>
<div class="highlight"><pre><span></span><code><span class="n">client</span> <span class="o">=</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">Client</span><span class="o">.</span><span class="n">from_gateway_bot</span><span class="p">(</span><span class="n">bot</span><span class="p">)</span>
<span class="n">client</span><span class="o">.</span><span class="n">set_type_dependency</span><span class="p">(</span><span class="n">Foo</span><span class="p">,</span> <span class="n">Foo</span><span class="p">())</span>
<span class="n">client</span><span class="o">.</span><span class="n">set_type_dependency</span><span class="p">(</span><span class="n">Bar</span><span class="p">,</span> <span class="n">Bar</span><span class="p">())</span>
</code></pre></div>
<p>Here we set the dependencies for the types <code>Foo</code> and <code>Bar</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_slash_command</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">command</span><span class="p">(</span>
    <span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">SlashContext</span><span class="p">,</span> <span class="n">foo_impl</span><span class="p">:</span> <span class="n">alluka</span><span class="o">.</span><span class="n">Injected</span><span class="p">[</span><span class="n">Foo</span><span class="p">],</span> <span class="n">bar_impl</span><span class="p">:</span> <span class="n">Bar</span> <span class="o">=</span> <span class="n">alluka</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">Bar</span><span class="p">)</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>
</code></pre></div>
<p>And here we declare a command callback as taking the client set values for
<code>Foo</code> and <code>Bar</code> as keyword arguments using two different approaches.
Since both arguments don't provide a default, these commands will fail if no
value for <code>Foo</code> or <code>Bar</code> has been set using
<a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.Client.set_type_dependency">Client.set_type_dependency</a>.</p>
<p>A more detailed guide on how this works and the full feature set (e.g. optional
dependencies) can be found <a href="https://alluka.cursed.solutions/usage/">here</a>.
<a class="autorefs autorefs-external" href="https://alluka.cursed.solutions/reference/abc/#alluka.abc.Client">alluka.abc.Client</a> is exposed at <a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.Client.injector">Client.injector</a>.</p>
<h3 id="standard-and-special-cased-injected-types">Standard and special cased injected types.<a class="headerlink" href="#standard-and-special-cased-injected-types" title="Permanent link">#</a></h3>
<p>The following types are registered globally as type dependencies:</p>
<ul>
<li><a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.Client">tanjun.abc.Client</a></li>
<li><a class="autorefs autorefs-internal" href="../reference/clients/#tanjun.clients.Client">tanjun.clients.Client</a></li>
<li><a class="autorefs autorefs-internal" href="../reference/dependencies/#tanjun.dependencies.owners.AbstractOwners">tanjun.dependencies.AbstractOwners</a> (for use with the standard owner check).</li>
<li><code>tanjun.LazyConstant[hikari.OwnUser]</code> (for use with <code>tanjun.inject_lc(hikari.OwnUser)</code>)</li>
<li><a class="autorefs autorefs-external" href="https://docs.hikari-py.dev/en/latest/reference/hikari/api/rest/#hikari.api.rest.RESTClient">hikari.api.rest.RESTClient</a></li>
<li><a class="autorefs autorefs-external" href="https://docs.hikari-py.dev/en/latest/reference/hikari/api/cache/#hikari.api.cache.Cache">hikari.api.cache.Cache</a> *</li>
<li><a class="autorefs autorefs-external" href="https://docs.hikari-py.dev/en/latest/reference/hikari/api/event_manager/#hikari.api.event_manager.EventManager">hikari.api.event_manager.EventManager</a> *</li>
<li><a class="autorefs autorefs-external" href="https://docs.hikari-py.dev/en/latest/reference/hikari/api/interaction_server/#hikari.api.interaction_server.InteractionServer">hikari.api.interaction_server.InteractionServer</a> *</li>
<li><a class="autorefs autorefs-external" href="https://docs.hikari-py.dev/en/latest/reference/hikari/traits/#hikari.traits.ShardAware">hikari.traits.ShardAware</a> *</li>
<li><a class="autorefs autorefs-external" href="https://docs.hikari-py.dev/en/latest/reference/hikari/api/voice/#hikari.api.voice.VoiceComponent">hikari.api.voice.VoiceComponent</a> *</li>
</ul>
<p>* These type dependencies are only registered if the relevant Hikari component
    was included while creating the <a class="autorefs autorefs-internal" href="../reference/clients/#tanjun.clients.Client">tanjun.clients.Client</a> instance.</p>
<p>The following type dependencies are available in specific contexts:</p>
<ul>
<li><a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.AutocompleteContext">tanjun.abc.AutocompleteContext</a>: slash command autocomplete execution</li>
<li><a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.AppCommandContext">tanjun.abc.AppCommandContext</a>: both slash and menu command execution (excluding any checks)</li>
<li><a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.MenuContext">tanjun.abc.MenuContext</a>: menu command execution</li>
<li><a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.MessageContext">tanjun.abc.MessageContext</a>: message command execution</li>
<li><a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.SlashContext">tanjun.abc.SlashContext</a>: slash command execution</li>
</ul>
<!-- * [tanjun.abc.MenuCommand][]: menu command execution (excluding any checks)
* [tanjun.abc.MessageCommand][]: message command execution (excluding any checks)
* [tanjun.abc.SlashCommand][]: slash command execution (excluding any checks)
TODO: this needs a consistency fix before being documented -->
<ul>
<li><a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.Component">tanjun.abc.Component</a>: Command execution (excluding client checks)</li>
</ul>
<!-- * [hikari.events.base_events.Event][] TODO: implement this-->

<p>Both <a class="autorefs autorefs-internal" href="../reference/clients/#tanjun.clients.Client.from_gateway_bot">Client.from_gateway_bot</a> and
<a class="autorefs autorefs-internal" href="../reference/clients/#tanjun.clients.Client.from_rest_bot">Client.from_rest_bot</a> register type
dependencies for the relevant <a class="autorefs autorefs-external" href="https://docs.hikari-py.dev/en/latest/reference/hikari/traits/#module-hikari.traits">hikari traits</a> that the bot is
compatible with. You can get this behaviour after directly initialising
<a class="autorefs autorefs-internal" href="../reference/#tanjun.Client">tanjun.clients.Client</a> without a from method by calling
<a class="autorefs autorefs-internal" href="../reference/clients/#tanjun.clients.Client.set_hikari_trait_injectors">Client.set_hikari_trait_injectors</a>
with the relevant bot object.</p>
<h2 id="advanced-command-flow-management">Advanced command flow management<a class="headerlink" href="#advanced-command-flow-management" title="Permanent link">#</a></h2>
<h3 id="checks">Checks<a class="headerlink" href="#checks" title="Permanent link">#</a></h3>
<p>Checks are functions that run before command execution to decide whether a
command or group of commands matches a context and should be called with it.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@tanjun</span><span class="o">.</span><span class="n">with_guild_check</span><span class="p">(</span><span class="n">follow_wrapped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">with_author_permission_check</span><span class="p">(</span><span class="n">hikari</span><span class="o">.</span><span class="n">Permissions</span><span class="o">.</span><span class="n">BAN_MEMBERS</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">with_own_permission_check</span><span class="p">(</span><span class="n">hikari</span><span class="o">.</span><span class="n">Permissions</span><span class="o">.</span><span class="n">BAN_MEMBERS</span><span class="p">,</span> <span class="n">follow_wrapped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_message_command</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_slash_command</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">default_member_permissions</span><span class="o">=</span><span class="n">hikari</span><span class="o">.</span><span class="n">Permissions</span><span class="o">.</span><span class="n">BAN_MEMBERS</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">command</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>
</code></pre></div>
<p>There's a collection of standard checks in <a class="autorefs autorefs-internal" href="../reference/checks/#tanjun.checks">tanjun.checks</a> that are all
exported top-level and work with all the command types. The only optional
configuration most users will care about for the standard checks is the
<code>error_message</code> argument which lets you adjust the response messages these
send when they fail.</p>
<div class="highlight"><pre><span></span><code><span class="n">component</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">tanjun</span><span class="o">.</span><span class="n">Component</span><span class="p">()</span>
    <span class="o">.</span><span class="n">add_check</span><span class="p">(</span><span class="n">tanjun</span><span class="o">.</span><span class="n">checks</span><span class="o">.</span><span class="n">GuildCheck</span><span class="p">())</span>
    <span class="o">.</span><span class="n">add_check</span><span class="p">(</span><span class="n">tanjun</span><span class="o">.</span><span class="n">checks</span><span class="o">.</span><span class="n">AuthorPermissionCheck</span><span class="p">(</span><span class="n">hikari</span><span class="o">.</span><span class="n">Permissions</span><span class="o">.</span><span class="n">BAN_MEMBERS</span><span class="p">))</span>
    <span class="o">.</span><span class="n">add_check</span><span class="p">(</span><span class="n">tanjun</span><span class="o">.</span><span class="n">checks</span><span class="o">.</span><span class="n">OwnPermissionCheck</span><span class="p">(</span><span class="n">hikari</span><span class="o">.</span><span class="n">Permissions</span><span class="o">.</span><span class="n">BAN_MEMBERS</span><span class="p">))</span>
<span class="p">)</span>

<span class="nd">@component</span><span class="o">.</span><span class="n">with_check</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">db_check</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">db</span><span class="p">:</span> <span class="n">alluka</span><span class="o">.</span><span class="n">Injected</span><span class="p">[</span><span class="n">Db</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">await</span> <span class="n">db</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">author</span><span class="o">.</span><span class="n">id</span><span class="p">))</span><span class="o">.</span><span class="n">banned</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">CommandError</span><span class="p">(</span><span class="s2">&quot;You are banned from using this bot&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="kc">False</span>

<span class="nd">@tanjun</span><span class="o">.</span><span class="n">with_owner_check</span><span class="p">(</span><span class="n">follow_wrapped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_message_command</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_slash_command</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">owner_only_command</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Context</span><span class="p">):</span>
    <span class="o">...</span>
</code></pre></div>
<p>Checks (both custom and standard) can be added to clients, components, and
commands using either the chainable <code>add_check</code> method or the decorator
style <code>with_check</code> method. The standard checks also provide <code>with_...</code>
decorators which can be used to add the check to a command during a decorator
chain. Checks on a client, component, or command group will be used for every
child command.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">ctx</span><span class="o">.</span><span class="n">author</span><span class="o">.</span><span class="n">discriminator</span> <span class="o">%</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">CommandError</span><span class="p">(</span><span class="s2">&quot;You are not one of the chosen ones&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>
<p>Custom checks can be made by making a function with either the signature
<code>def (tanjun.abc.Context, ...) -&gt; bool</code> or <code>async def (tanjun.abc.Context, ...) -&gt; bool</code>
(where <a class="autorefs autorefs-internal" href="#dependency-injection">dependency injection</a> is supported).  Returning
<a class="autorefs autorefs-external" href="https://docs.python.org/3.11/library/constants.html#True">True</a> indicates that the check passed, and returning <a class="autorefs autorefs-external" href="https://docs.python.org/3.11/library/constants.html#False">False</a> indicates that
the client should continue looking for a matching command as the check failed.
You will probably want to raise <a class="autorefs autorefs-internal" href="../reference/errors/#tanjun.errors.CommandError">CommandError</a> to
end command execution with a response rather than returning <a class="autorefs autorefs-external" href="https://docs.python.org/3.11/library/constants.html#False">False</a>.</p>
<h3 id="execution-hooks">Execution hooks<a class="headerlink" href="#execution-hooks" title="Permanent link">#</a></h3>
<p>Command hooks are callbacks that are called around command execution, these
are contained within <a class="autorefs autorefs-internal" href="../reference/hooks/#tanjun.hooks.Hooks">Hooks</a> objects which may be added
to a command, client, or component using <code>set_hooks</code> where hooks on a client,
component or command group will be called for every child command.</p>
<p>There are several different kinds of hooks which all support dependency
injection and may be synchronous or asynchronous:</p>
<div class="highlight"><pre><span></span><code><span class="n">hooks</span> <span class="o">=</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">AnyHooks</span><span class="p">()</span>

<span class="nd">@hooks</span><span class="o">.</span><span class="n">with_pre_execution</span>  <span class="c1"># hooks.add_pre_execution</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">pre_execution_hook</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>
</code></pre></div>
<p>Pre-execution hooks are called before the execution of a command but after
command matching has finished and all the relevant checks have passed.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@hooks</span><span class="o">.</span><span class="n">with_post_execution</span>  <span class="c1"># hooks.add_post_execution</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">post_execution_hook</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>
</code></pre></div>
<p>Post-execution hooks are called after a command has finished executing,
regardless of whether it passed or failed.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@hooks</span><span class="o">.</span><span class="n">with_on_success</span>  <span class="c1"># hooks.add_success_hook</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">success_hook</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>
</code></pre></div>
<p>Success hooks are called after a command has finished executing successfully
(without raising any errors).</p>
<div class="highlight"><pre><span></span><code><span class="nd">@hooks</span><span class="o">.</span><span class="n">with_on_error</span>  <span class="c1"># hooks.add_on_error</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">error_hook</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">error</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]:</span>
    <span class="o">...</span>
</code></pre></div>
<p>Error hooks are called when command's execution is ended early by an error raise
that isn't a <a class="autorefs autorefs-internal" href="../reference/errors/#tanjun.errors.ParserError">ParserError</a>,
<a class="autorefs autorefs-internal" href="../reference/errors/#tanjun.errors.CommandError">CommandError</a> or
<a class="autorefs autorefs-internal" href="../reference/errors/#tanjun.errors.HaltExecution">HaltExecution</a> (as these are special-cased).</p>
<p>The return value of an error hook is used with other error hook return values
to workout whether the error should be re-raised: <a class="autorefs autorefs-external" href="https://docs.python.org/3.11/library/constants.html#True">True</a> acts as a vote
towards suppressing the error, <a class="autorefs autorefs-external" href="https://docs.python.org/3.11/library/constants.html#False">False</a> acts as a vote towards re-raising the
error and <a class="autorefs autorefs-external" href="https://docs.python.org/3.11/library/constants.html#None">None</a> acts as no vote. In the case of a tie the error will be
re-raised.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@hooks</span><span class="o">.</span><span class="n">with_on_parser_error</span>  <span class="c1"># hooks.add_on_parser_error</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">parser_error_hook</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">error</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">ParserError</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>
</code></pre></div>
<p>Parser error hooks are called when the argument parsing of a message command
failed. Parser errors are never re-raised.</p>
<h3 id="concurrency-limiter">Concurrency limiter<a class="headerlink" href="#concurrency-limiter" title="Permanent link">#</a></h3>
<p>Concurrency limiters allow you to limit how many calls can be made to a group
of commands concurrently.</p>
<div class="highlight"><pre><span></span><code><span class="n">client</span> <span class="o">=</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">Client</span><span class="o">.</span><span class="n">from_gateway_bot</span><span class="p">(</span><span class="n">bot</span><span class="p">)</span>
<span class="p">(</span>
    <span class="n">tanjun</span><span class="o">.</span><span class="n">InMemoryConcurrencyLimiter</span><span class="p">()</span>
    <span class="o">.</span><span class="n">set_bucket</span><span class="p">(</span><span class="s2">&quot;main_commands&quot;</span><span class="p">,</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">BucketResource</span><span class="o">.</span><span class="n">USER</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="o">.</span><span class="n">disable_bucket</span><span class="p">(</span><span class="s2">&quot;plugin.meta&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">add_to_client</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div>
<p>Here <a class="autorefs autorefs-internal" href="../reference/dependencies/#tanjun.dependencies.limiters.InMemoryConcurrencyLimiter">InMemoryConcurrencyLimiter</a>
will manage the concurrency limits for all the commands in this bot instance with
<a class="autorefs autorefs-internal" href="../reference/dependencies/#tanjun.dependencies.limiters.InMemoryConcurrencyLimiter.set_bucket">Limiter.set_bucket</a>
being called to limit the bucket <code>"main_commands"</code> to at most 2 concurrent executions per user,
<a class="autorefs autorefs-internal" href="../reference/dependencies/#tanjun.dependencies.limiters.InMemoryConcurrencyLimiter.disable_bucket">Limiter.disable_bucket</a>
being called to ensure that the bucket <code>"plugin.meta"</code> has no concurrency limit
as unconfigured buckets will default to the configuration for the <code>"default"</code> bucket, and
<a class="autorefs autorefs-internal" href="../reference/dependencies/#tanjun.dependencies.limiters.InMemoryConcurrencyLimiter.add_to_client">Limiter.add_to_client</a>
being used to set this limiter for a client (note that clients can only have 1
linked limiter).</p>
<div class="highlight"><pre><span></span><code><span class="nd">@tanjun</span><span class="o">.</span><span class="n">with_concurrency_limit</span><span class="p">(</span><span class="s2">&quot;main_commands&quot;</span><span class="p">,</span> <span class="n">follow_wrapped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">annotations</span><span class="o">.</span><span class="n">with_annotated_args</span><span class="p">(</span><span class="n">follow_wrapped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_message_command</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_slash_command</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_user_menu</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">user_command</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Annotated</span><span class="p">[</span><span class="n">annotations</span><span class="o">.</span><span class="n">User</span><span class="p">,</span> <span class="s2">&quot;A user&quot;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>
</code></pre></div>
<p>And here we use <a class="autorefs autorefs-internal" href="../reference/dependencies/#tanjun.dependencies.limiters.with_concurrency_limit">with_concurrency_limit</a>
to mark these commands as using the <code>"main_commands"</code> concurrency limit bucket;
buckets share their limits for a resource across all the commands under it. For
more information on the resources concurrency can be limited by see
<a class="autorefs autorefs-internal" href="../reference/#tanjun.BucketResource">BucketResource</a>.</p>
<h3 id="cooldowns">Cooldowns<a class="headerlink" href="#cooldowns" title="Permanent link">#</a></h3>
<p>Cooldowns limit how often a group of commands can be called.</p>
<div class="highlight"><pre><span></span><code><span class="n">client</span> <span class="o">=</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">Client</span><span class="o">.</span><span class="n">from_gateway_bot</span><span class="p">(</span><span class="n">bot</span><span class="p">)</span>
<span class="p">(</span>
    <span class="n">tanjun</span><span class="o">.</span><span class="n">InMemoryCooldownManager</span><span class="p">()</span>
    <span class="o">.</span><span class="n">set_bucket</span><span class="p">(</span><span class="s2">&quot;main_commands&quot;</span><span class="p">,</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">BucketResource</span><span class="o">.</span><span class="n">USER</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
    <span class="o">.</span><span class="n">disable_bucket</span><span class="p">(</span><span class="s2">&quot;plugin.meta&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">add_to_client</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div>
<p>Here <a class="autorefs autorefs-internal" href="../reference/dependencies/#tanjun.dependencies.limiters.InMemoryCooldownManager">InMemoryCooldownManager</a>
will manage the cooldowns for all the commands in this bot instance with
<a class="autorefs autorefs-internal" href="../reference/dependencies/#tanjun.dependencies.limiters.InMemoryCooldownManager.set_bucket">Manager.set_bucket</a>
being called to limit the bucket <code>"main_commands"</code> to 5 calls per user every 60 seconds,
<a class="autorefs autorefs-internal" href="../reference/dependencies/#tanjun.dependencies.limiters.InMemoryCooldownManager.disable_bucket">Manager.disable_bucket</a>
being called to ensure that the bucket <code>"plugin.meta"</code> has no cooldowns as
unconfigured buckets will default to the configuration for the <code>"default"</code> bucket, and
<a class="autorefs autorefs-internal" href="../reference/dependencies/#tanjun.dependencies.limiters.InMemoryCooldownManager.add_to_client">Manager.add_to_client</a>
being used to set this cooldown manager for a client (note that clients can
only have 1 linked cooldown manager).</p>
<div class="highlight"><pre><span></span><code><span class="nd">@tanjun</span><span class="o">.</span><span class="n">with_cooldown</span><span class="p">(</span><span class="s2">&quot;main_commands&quot;</span><span class="p">,</span> <span class="n">follow_wrapped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">annotations</span><span class="o">.</span><span class="n">with_annotated_args</span><span class="p">(</span><span class="n">follow_wrapped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_message_command</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_slash_command</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">)</span>
<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_user_menu</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">user_command</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Annotated</span><span class="p">[</span><span class="n">annotations</span><span class="o">.</span><span class="n">User</span><span class="p">,</span> <span class="s2">&quot;A user&quot;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>
</code></pre></div>
<p>And here we use <a class="autorefs autorefs-internal" href="../reference/dependencies/#tanjun.dependencies.limiters.with_cooldown">with_cooldown</a>
to mark these commands as using the <code>"main_commands"</code> cooldown bucket;
buckets share their cooldowns for a resource across all the commands under it.
For more information on the resources cooldowns can be set for see
<a class="autorefs autorefs-internal" href="../reference/#tanjun.BucketResource">BucketResource</a>.</p>
<h2 id="localisation">Localisation<a class="headerlink" href="#localisation" title="Permanent link">#</a></h2>
<p><a href="https://en.wikipedia.org/wiki/Language_localisation">Localisation</a> allows for
tailoring the declarations and responses of slash commands and context menu
commands to match specific regions by providing multiple translations
of a field. Localisation on Discord is limited to the locales Discord supports
(listed at <a class="autorefs autorefs-external" href="https://docs.hikari-py.dev/en/latest/reference/hikari/locales/#hikari.locales.Locale">hikari.locales.Locale</a>).</p>
<h3 id="localising-command-declarations">Localising command declarations<a class="headerlink" href="#localising-command-declarations" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_slash_command</span><span class="p">({</span><span class="n">hikari</span><span class="o">.</span><span class="n">Locale</span><span class="o">.</span><span class="n">EN_US</span><span class="p">:</span> <span class="s2">&quot;Hola&quot;</span><span class="p">},</span> <span class="s2">&quot;description&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">command</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Context</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>
</code></pre></div>
<p>For fields which support localisation you've previously seen a single string
being passed to them: this value is used as a default for all locales and for
environments which don't support localisation (e.g. message command execution).
But as shown above, you can also pass a dictionary of localised values to these
fields.</p>
<h3 id="client-localiser">Client localiser<a class="headerlink" href="#client-localiser" title="Permanent link">#</a></h3>
<p>Tanjun also provides an optional global localiser which allows for
setting/overriding the locale-specific variants used for localised fields such
as error message responses and application fields globally.</p>
<div class="highlight"><pre><span></span><code><span class="n">client</span> <span class="o">=</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">Client</span><span class="o">.</span><span class="n">from_gateway_bot</span><span class="p">(</span><span class="n">bot</span><span class="p">)</span>

<span class="p">(</span>
    <span class="n">tanjun</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">BasicLocaliser</span><span class="p">()</span>
    <span class="o">.</span><span class="n">set_variants</span><span class="p">(</span>
        <span class="s2">&quot;slash:command name:name&quot;</span><span class="p">,</span> <span class="p">{</span><span class="n">hikari</span><span class="o">.</span><span class="n">Locale</span><span class="o">.</span><span class="n">EN_US</span><span class="p">:</span> <span class="s2">&quot;american variant&quot;</span><span class="p">,</span> <span class="n">hikari</span><span class="o">.</span><span class="n">Locale</span><span class="o">.</span><span class="n">EN_GB</span><span class="p">:</span> <span class="s2">&quot;english variant&quot;</span><span class="p">}</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">set_variants</span><span class="p">(</span>
        <span class="s2">&quot;message_menu:command name:check:tanjun.OwnerCheck&quot;</span><span class="p">,</span>
        <span class="p">{</span><span class="n">hikari</span><span class="o">.</span><span class="n">Locale</span><span class="o">.</span><span class="n">JA</span><span class="p">:</span> <span class="s2">&quot;konnichiwa&quot;</span><span class="p">,</span> <span class="n">hikari</span><span class="o">.</span><span class="n">Locale</span><span class="o">.</span><span class="n">ES_ES</span><span class="p">:</span> <span class="s2">&quot;Hola&quot;</span><span class="p">},</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">add_to_client</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div>
<p>Specific fields may be overridden by their ID as shown above. There is no
guaranteed format for field IDs but the standard implementations will always
use the following formats unless explicitly overridden:</p>
<ul>
<li>Checks and limiters: <code>f"{command_type}:{command_name}:check:{check_name}"</code></li>
<li>Command descriptions: <code>f"{command_type}:{command_name}:description"</code></li>
<li>Command names: <code>f"{command_type}:{command_name}:name"</code></li>
<li>Slash option names: <code>f"slash:{command_name}:option.name:{option_name}"</code></li>
<li>Slash option descriptions: <code>f"slash:{command_name}:option.description:{option_name}"</code></li>
<li>Slash option choice names: <code>f"slash:{command_name}:choice.name:{choice_name}"</code></li>
</ul>
<p><code>command_type</code> may be one of <code>"message_menu"</code>, <code>"slash"</code> or <code>"user_menu"</code>,
<code>command_name</code> will be the full name of the command (including parent command
names in the path), and standard check names will always be prefixed with
<code>"tanjun."</code>.</p>
<p>It's highly recommended that 3rd party libraries match this format if possible.</p>
<h3 id="localising-command-responses">Localising command responses<a class="headerlink" href="#localising-command-responses" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">LOCALISED_RESPONSES</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">hikari</span><span class="o">.</span><span class="n">Locale</span><span class="o">.</span><span class="n">DA</span><span class="p">:</span> <span class="s2">&quot;Hej&quot;</span><span class="p">,</span>
    <span class="n">hikari</span><span class="o">.</span><span class="n">Locale</span><span class="o">.</span><span class="n">DE</span><span class="p">:</span> <span class="s2">&quot;Hallo&quot;</span><span class="p">,</span>
    <span class="n">hikari</span><span class="o">.</span><span class="n">Locale</span><span class="o">.</span><span class="n">EN_GB</span><span class="p">:</span> <span class="s2">&quot;Good day fellow sir&quot;</span><span class="p">,</span>
    <span class="n">hikari</span><span class="o">.</span><span class="n">Locale</span><span class="o">.</span><span class="n">EN_US</span><span class="p">:</span> <span class="s2">&quot;*shoots you*&quot;</span><span class="p">,</span>
    <span class="n">hikari</span><span class="o">.</span><span class="n">Locale</span><span class="o">.</span><span class="n">ES_ES</span><span class="p">:</span> <span class="s2">&quot;Hola&quot;</span><span class="p">,</span>
    <span class="n">hikari</span><span class="o">.</span><span class="n">Locale</span><span class="o">.</span><span class="n">FR</span><span class="p">:</span> <span class="s2">&quot;Bonjour, camarade baguette&quot;</span><span class="p">,</span>
    <span class="n">hikari</span><span class="o">.</span><span class="n">Locale</span><span class="o">.</span><span class="n">PL</span><span class="p">:</span> <span class="s2">&quot;Musimy szerzyć gejostwo w Strefach wolnych od LGBT, musimy zrobić rajd gejowski&quot;</span><span class="p">,</span>
    <span class="n">hikari</span><span class="o">.</span><span class="n">Locale</span><span class="o">.</span><span class="n">SV_SE</span><span class="p">:</span> <span class="s2">&quot;Hej, jag älskar min Blåhaj&quot;</span><span class="p">,</span>
    <span class="n">hikari</span><span class="o">.</span><span class="n">Locale</span><span class="o">.</span><span class="n">VI</span><span class="p">:</span> <span class="s2">&quot;Xin chào, Cây nói tiếng Việt&quot;</span><span class="p">,</span>
    <span class="n">hikari</span><span class="o">.</span><span class="n">Locale</span><span class="o">.</span><span class="n">TR</span><span class="p">:</span> <span class="s2">&quot;Merhaba&quot;</span><span class="p">,</span>
    <span class="n">hikari</span><span class="o">.</span><span class="n">Locale</span><span class="o">.</span><span class="n">CS</span><span class="p">:</span> <span class="s2">&quot;Ahoj&quot;</span><span class="p">,</span>
    <span class="n">hikari</span><span class="o">.</span><span class="n">Locale</span><span class="o">.</span><span class="n">ZH_CN</span><span class="p">:</span> <span class="s2">&quot;自由香港&quot;</span><span class="p">,</span>
    <span class="n">hikari</span><span class="o">.</span><span class="n">Locale</span><span class="o">.</span><span class="n">JA</span><span class="p">:</span> <span class="s2">&quot;こんにちは、アニメの女の子だったらいいのに&quot;</span><span class="p">,</span>
    <span class="n">hikari</span><span class="o">.</span><span class="n">Locale</span><span class="o">.</span><span class="n">ZH_TW</span><span class="p">:</span> <span class="s2">&quot;让台湾自由&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="nd">@tanjun</span><span class="o">.</span><span class="n">as_slash_command</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">as_slash_command</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">tanjun</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">SlashContext</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="n">LOCALISED_RESPONSES</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">interaction</span><span class="o">.</span><span class="n">locale</span><span class="p">,</span> <span class="s2">&quot;hello&quot;</span><span class="p">))</span>
</code></pre></div>
<p><a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.AppCommandContext.interaction">tanjun.abc.AppCommandContext.interaction</a> (base class for both
<a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.SlashContext">tanjun.abc.SlashContext</a> and <a class="autorefs autorefs-internal" href="../reference/abc/#tanjun.abc.MenuContext">tanjun.abc.MenuContext</a>) both have the
fields <code>guild_locale</code> and <code>locale</code> which provide the set locale of the guild
and the user triggering the command respectively.
This <a class="autorefs autorefs-external" href="https://docs.hikari-py.dev/en/latest/reference/hikari/locales/#hikari.locales.Locale">locale</a> can be used to localise responses to
specific languages within your own code.</p>
<!-- # TODO: some day, document buildings commands using the flient interface -->





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.407015b8.min.js"></script>
      
    
  </body>
</html>